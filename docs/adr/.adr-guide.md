# üöÄ Guia R√°pido - Como Criar um ADR

## Quando criar um ADR?

Crie um ADR quando voc√™:

‚úÖ **Deve criar:**
- Escolher entre diferentes tecnologias/bibliotecas
- Definir padr√µes de c√≥digo significativos
- Fazer mudan√ßas arquiteturais importantes
- Tomar decis√µes que afetam m√∫ltiplos componentes
- Fazer trade-offs importantes

‚ùå **N√£o precisa criar:**
- Implementar features triviais
- Fazer refatora√ß√µes simples
- Corrigir bugs
- Mudar estilo/formata√ß√£o

## Processo de Cria√ß√£o

### 1. Identifique o pr√≥ximo n√∫mero

```bash
cd cli/docs/adr
ls -la | grep "^[0-9]" | tail -1
# Veja o √∫ltimo n√∫mero e incremente
```

### 2. Copie o template

```bash
cp TEMPLATE.md 0003-seu-titulo.md
```

### 3. Preencha as se√ß√µes

Use o editor de sua prefer√™ncia e siga o template:

```markdown
# 0003. Seu T√≠tulo Aqui

Data: 2025-11-16

## Status
üü° **Proposed**

## Contexto
[Por que precisamos decidir isso?]

## Decis√£o
[O que decidimos fazer?]

## Consequ√™ncias
[Quais s√£o os impactos?]
```

### 4. Inclua alternativas

**Sempre documente alternativas consideradas!**

Isso √© crucial para entender o racioc√≠nio:

```markdown
### Alternativas consideradas

#### Alternativa 1: [Nome]
**Pros:** ‚úÖ ...
**Cons:** ‚ùå ...
**Decis√£o:** ‚ùå Rejeitada porque...

#### Alternativa 2: [Nome escolhida]
**Pros:** ‚úÖ ...
**Cons:** ‚ùå ...
**Decis√£o:** ‚úÖ Escolhida porque...
```

### 5. Abra para discuss√£o

1. Commit com status `Proposed`
2. Abra PR ou issue para discuss√£o
3. Mencione pessoas relevantes
4. Incorpore feedback

### 6. Aceite a decis√£o

Ap√≥s consenso:

```markdown
## Status
‚úÖ **Accepted**
```

### 7. Atualize o √≠ndice

Edite `README.md` e adicione na tabela:

```markdown
| [0003](0003-seu-titulo.md) | Seu T√≠tulo | Accepted | 2025-11-16 |
```

## Exemplos Reais

### Exemplo 1: Decis√£o T√©cnica

```markdown
# 0004. Uso de Zod para Valida√ß√£o

## Contexto
Precisamos validar configura√ß√µes do usu√°rio e componentes.
Atualmente fazemos valida√ß√£o manual propensa a erros.

## Decis√£o
Adotaremos Zod para valida√ß√£o de schemas TypeScript.

## Consequ√™ncias
‚úÖ Type-safety
‚úÖ Mensagens de erro claras
‚ùå Depend√™ncia adicional (+50KB)
```

### Exemplo 2: Decis√£o de Processo

```markdown
# 0005. Conventional Commits Obrigat√≥rio

## Contexto
Hist√≥rico de commits inconsistente dificulta gera√ß√£o de changelog.

## Decis√£o
Tornaremos Conventional Commits obrigat√≥rio via commitlint.

## Consequ√™ncias
‚úÖ Changelogs autom√°ticos
‚úÖ Versionamento sem√¢ntico claro
‚ùå Curva de aprendizado para novos contribuidores
```

## Dicas

### ‚úÖ Fa√ßa:

- **Seja objetivo**: ADRs devem ser r√°pidos de ler
- **Inclua contexto**: Explique o "porqu√™"
- **Documente alternativas**: Mostre que considerou outras op√ß√µes
- **Seja honesto**: Liste consequ√™ncias negativas tamb√©m
- **Use exemplos**: C√≥digo ou diagramas quando aplic√°vel

### ‚ùå N√£o fa√ßa:

- **Documentar tudo**: Nem tudo precisa de ADR
- **Ser vago**: "Melhorar performance" n√£o √© suficiente
- **Omitir alternativas**: Sempre mostre que pensou em op√ß√µes
- **Editar ADRs aceitos**: Crie novo ADR se precisar mudar
- **Ser prolixo**: Mantenha conciso

## Checklist R√°pido

Antes de submeter seu ADR, verifique:

- [ ] T√≠tulo claro e descritivo
- [ ] Data preenchida
- [ ] Status definido (normalmente `Proposed`)
- [ ] Contexto explica o problema claramente
- [ ] Pelo menos 2 alternativas documentadas
- [ ] Decis√£o justificada
- [ ] Consequ√™ncias honestas (positivas E negativas)
- [ ] N√∫mero sequencial correto
- [ ] Adicionado na tabela do README.md

## Ferramentas √öteis

### CLI para ADRs (Opcional)

Voc√™ pode usar ferramentas como `adr-tools`:

```bash
npm install -g adr-tools

# Criar novo ADR
adr new "Uso de Zod para Valida√ß√£o"

# Listar ADRs
adr list

# Substituir ADR
adr new -s 2 "Nova Solu√ß√£o"  # Supersede ADR 2
```

### Template VSCode Snippet (Opcional)

Crie `.vscode/adr.code-snippets`:

```json
{
  "ADR Template": {
    "prefix": "adr",
    "body": [
      "# ${1:NNNN}. ${2:T√≠tulo}",
      "",
      "Data: ${CURRENT_YEAR}-${CURRENT_MONTH}-${CURRENT_DATE}",
      "",
      "## Status",
      "",
      "üü° **Proposed**",
      "",
      "## Contexto",
      "",
      "${3:Descreva o problema}",
      "",
      "## Decis√£o",
      "",
      "${4:Descreva a decis√£o}",
      "",
      "## Consequ√™ncias",
      "",
      "### Positivas ‚úÖ",
      "",
      "${5:Liste consequ√™ncias positivas}",
      "",
      "### Negativas ‚ùå",
      "",
      "${6:Liste consequ√™ncias negativas}",
      ""
    ]
  }
}
```

## Perguntas Frequentes

### Q: Posso editar um ADR depois de aceito?

**A:** N√£o! ADRs s√£o imut√°veis. Se uma decis√£o mudar, crie um novo ADR e marque o antigo como `Superseded`.

### Q: Todo PR precisa de ADR?

**A:** N√£o! Apenas decis√µes arquiteturais significativas. Features normais n√£o precisam.

### Q: E se eu discordar de um ADR?

**A:** Enquanto est√° `Proposed`, comente na PR. Se j√° est√° `Accepted`, voc√™ pode propor um novo ADR para substitu√≠-lo.

### Q: ADRs podem referenciar outros ADRs?

**A:** Sim! Use links relativos: `Veja [ADR-0002](0002-ast-para-deteccao-de-dependencias.md)`

### Q: Preciso implementar antes de aceitar o ADR?

**A:** N√£o necessariamente. Voc√™ pode aceitar a decis√£o e implementar depois. Mas documente o status de implementa√ß√£o.

## Recursos

- [ADR GitHub](https://adr.github.io/)
- [Exemplos de ADRs](https://github.com/joelparkerhenderson/architecture-decision-record)
- [Quando usar ADRs](https://cognitect.com/blog/2011/11/15/documenting-architecture-decisions)

---

**Lembre-se**: ADRs s√£o uma ferramenta, n√£o uma burocracia. Use com bom senso! üéØ

