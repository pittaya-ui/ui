{
  "name": "multi-select",
  "type": "registry:ui",
  "description": "A searchable multi-select component with badges for displaying selected items.",
  "dependencies": [
    "lucide-react"
  ],
  "registryDependencies": [
    "badge",
    "button",
    "command",
    "popover",
    "utils"
  ],
  "files": [
    {
      "name": "multi-select.tsx",
      "content": "\"use client\";\n\nimport { Check, ChevronsUpDown, X } from \"lucide-react\";\nimport * as React from \"react\";\n\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n} from \"@/components/ui/command\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\nimport { cn } from \"@/lib/utils\";\n\nexport interface MultiSelectOption {\n  label: string;\n  value: string;\n}\n\ninterface MultiSelectProps {\n  options: MultiSelectOption[];\n  value?: string[];\n  onChange?: (value: string[]) => void;\n  placeholder?: string;\n  emptyMessage?: string;\n  maxCount?: number;\n  disabled?: boolean;\n  className?: string;\n}\n\nexport function MultiSelect({\n  options,\n  value = [],\n  onChange,\n  placeholder = \"Select items...\",\n  emptyMessage = \"No items found.\",\n  maxCount,\n  disabled = false,\n  className,\n}: MultiSelectProps) {\n  const [open, setOpen] = React.useState(false);\n\n  const selectedValues = new Set(value);\n\n  const handleUnselect = (item: string) => {\n    const newValue = value.filter((v) => v !== item);\n    onChange?.(newValue);\n  };\n\n  const handleSelect = (item: string) => {\n    const newValue = selectedValues.has(item)\n      ? value.filter((v) => v !== item)\n      : [...value, item];\n    onChange?.(newValue);\n  };\n\n  const selectedOptions = options.filter((option) =>\n    selectedValues.has(option.value)\n  );\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger asChild>\n        <Button\n          variant=\"outline\"\n          role=\"combobox\"\n          aria-expanded={open}\n          className={cn(\n            \"h-auto min-h-10 w-full justify-between\",\n            disabled && \"cursor-not-allowed opacity-50\",\n            className\n          )}\n          disabled={disabled}\n        >\n          <div className=\"flex flex-wrap items-center gap-1\">\n            {selectedOptions.length > 0 ? (\n              <>\n                {maxCount && selectedOptions.length > maxCount ? (\n                  <Badge\n                    variant=\"secondary\"\n                    className=\"rounded-sm px-1 font-normal\"\n                  >\n                    {selectedOptions.length} selected\n                  </Badge>\n                ) : (\n                  selectedOptions.map((option) => (\n                    <Badge\n                      variant=\"secondary\"\n                      key={option.value}\n                      className=\"rounded-sm px-1 font-normal\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleUnselect(option.value);\n                      }}\n                    >\n                      {option.label}\n                      <button\n                        className=\"ring-offset-background focus:ring-ring ml-1 rounded-full outline-none focus:ring-2 focus:ring-offset-2\"\n                        onKeyDown={(e) => {\n                          if (e.key === \"Enter\") {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            handleUnselect(option.value);\n                          }\n                        }}\n                        onMouseDown={(e) => {\n                          e.preventDefault();\n                          e.stopPropagation();\n                        }}\n                        onClick={(e) => {\n                          e.preventDefault();\n                          e.stopPropagation();\n                          handleUnselect(option.value);\n                        }}\n                      >\n                        <X className=\"text-muted-foreground hover:text-foreground h-3 w-3\" />\n                      </button>\n                    </Badge>\n                  ))\n                )}\n              </>\n            ) : (\n              <span className=\"text-muted-foreground\">{placeholder}</span>\n            )}\n          </div>\n          <ChevronsUpDown className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-full p-0\" align=\"start\">\n        <Command>\n          <CommandInput placeholder=\"Search...\" />\n          <CommandList>\n            <CommandEmpty>{emptyMessage}</CommandEmpty>\n            <CommandGroup>\n              {options.map((option) => {\n                const isSelected = selectedValues.has(option.value);\n                return (\n                  <CommandItem\n                    key={option.value}\n                    onSelect={() => handleSelect(option.value)}\n                  >\n                    <div\n                      className={cn(\n                        \"border-primary mr-2 flex h-4 w-4 items-center justify-center rounded-sm border\",\n                        isSelected\n                          ? \"bg-primary text-primary-foreground\"\n                          : \"opacity-50 [&_svg]:invisible\"\n                      )}\n                    >\n                      <Check className=\"h-4 w-4\" />\n                    </div>\n                    <span>{option.label}</span>\n                  </CommandItem>\n                );\n              })}\n            </CommandGroup>\n          </CommandList>\n        </Command>\n      </PopoverContent>\n    </Popover>\n  );\n}\n"
    }
  ]
}